<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>小P 百家樂跑分算牌器（雙公式版）</title>

  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      max-width: 640px;
      margin: 40px auto;
      padding: 0 16px;
      line-height: 1.6;
    }

    h1 {
      font-size: 26px;
      margin-bottom: 12px;
      font-weight: 700;
      text-align: center;
    }

    .section-title {
      font-weight: 600;
      margin-top: 12px;
    }

    .card-input {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      box-sizing: border-box;
      border-radius: 8px;
      border: 1px solid #ccc;
      margin-top: 4px;
    }

    .hint {
      font-size: 13px;
      color: #666;
      margin-top: 4px;
      margin-bottom: 10px;
    }

    button {
      padding: 10px 16px;
      font-size: 16px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      margin-right: 6px;
      margin-top: 12px;
    }

    .btn-calc  { background: #007aff; color: white; }
    .btn-clear { background: #999;    color: white; }
    .btn-reset { background: #d60000; color: white; }

    .result-box {
      margin-top: 20px;
      padding: 16px;
      border: 1px solid #ddd;
      border-radius: 10px;
      background: #f9f9f9;
    }

    .formula-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .suggest {
      font-size: 18px;
      font-weight: bold;
      margin-top: 8px;
    }

    .blue { color: #007aff; font-weight: bold; }
    .red  { color: #d60000; font-weight: bold; }

    .note {
      margin-top: 22px;
      font-size: 18px;
      font-weight: bold;
    }

    .note-box {
      font-size: 16px;
      padding: 14px;
      background: #fff7d6;
      border: 2px solid #f0c050;
      border-radius: 10px;
      line-height: 1.8;
      margin-top: 8px;
    }
  </style>
</head>

<body>

<h1>小P 百家樂跑分算牌器（雙公式）</h1>

<p>
  目前同一組牌會同時計算兩種公式，分開顯示跑分與建議。<br>
  ✅ 正數建議下「閒」、負數建議下「莊」、0 則中性不下。
</p>

<div class="section-title">輸入本局牌：</div>
<input id="cards" class="card-input" placeholder="例如：4 5 6 7 2 3" />
<div class="hint">請用空格區分每張牌，例如：4 5 7 A 2 6</div>

<div>
  <button class="btn-calc"  onclick="calculate()">計算本局</button>
  <button class="btn-clear" onclick="clearInput()">清除輸入</button>
  <button class="btn-reset" onclick="resetCount()">重置全部</button>
</div>

<div class="result-box">
  <!-- 公式一 -->
  <div class="formula-title">
    公式一：4、5、6、7 = +1；A / 1、2、3 = −1；其他 = 0
  </div>
  <div id="roundResult1">本局分數（公式一）：0</div>
  <div id="totalResult1">累計分數（公式一）：0</div>
  <div id="suggestion1" class="suggest">建議（公式一）：－</div>

  <hr style="margin: 16px 0; border: none; border-top: 1px dashed #ccc;">

  <!-- 公式二 -->
  <div class="formula-title">
    公式二：2、3、4、5、6 = +1；7、8、9 = −1；10 / J / Q / K / A(1) = 0
  </div>
  <div id="roundResult2">本局分數（公式二）：0</div>
  <div id="totalResult2">累計分數（公式二）：0</div>
  <div id="suggestion2" class="suggest">建議（公式二）：－</div>

  <!-- 使用方式 -->
  <div class="note">使用方式：</div>
  <div class="note-box">
    ✔ 請找莊閒平衡差距不超過五顆，開局15-20局。<br>
    ✔ 本方法並非100%勝率<br>
    ✔ 所有結果僅供參考，輸贏請自行負責。
  </div>
</div>

<script>
  // 兩套公式各自的累計跑分
  let totalCount1 = 0; // 公式一累計
  let totalCount2 = 0; // 公式二累計

  function calculate() {
    const input = document.getElementById("cards").value;
    const cards = parseCards(input);

    // 本局兩套公式的分數
    const round1 = countFormula1(cards);
    const round2 = countFormula2(cards);

    // 跑分累加
    totalCount1 += round1;
    totalCount2 += round2;

    // 顯示 公式一
    document.getElementById("roundResult1").innerText =
      "本局分數（公式一）：" + formatSigned(round1);
    document.getElementById("totalResult1").innerText =
      "累計分數（公式一）：" + formatSigned(totalCount1);
    updateSuggestion(totalCount1, "suggestion1", "公式一");

    // 顯示 公式二
    document.getElementById("roundResult2").innerText =
      "本局分數（公式二）：" + formatSigned(round2);
    document.getElementById("totalResult2").innerText =
      "累計分數（公式二）：" + formatSigned(totalCount2);
    updateSuggestion(totalCount2, "suggestion2", "公式二");
  }

  function parseCards(str) {
    return str
      .split(/[\s,，]+/)
      .map(s => s.trim().toUpperCase())
      .filter(s => s.length > 0);
  }

  // 公式一：4,5,6,7 = +1； A/1,2,3 = -1
  function countFormula1(cards) {
    let n = 0;
    for (const c of cards) {
      if (c === "A" || c === "1" || c === "2" || c === "3") {
        n -= 1;
      } else if (c === "4" || c === "5" || c === "6" || c === "7") {
        n += 1;
      }
    }
    return n;
  }

  // 公式二：2-6 = +1；7-9 = -1；10/J/Q/K/A = 0
  function countFormula2(cards) {
    let n = 0;
    for (const c of cards) {
      if (c === "2" || c === "3" || c === "4" || c === "5" || c === "6") {
        n += 1;
      } else if (c === "7" || c === "8" || c === "9") {
        n -= 1;
      }
      // 10、J、Q、K、A → 0 分，不處理
    }
    return n;
  }

  // 根據累計分數給建議
  function updateSuggestion(total, elementId, label) {
    const el = document.getElementById(elementId);
    if (total > 0) {
      el.innerHTML = `建議（${label}）：<span class='blue'>閒</span>`;
    } else if (total < 0) {
      el.innerHTML = `建議（${label}）：<span class='red'>莊</span>`;
    } else {
      el.innerHTML = `建議（${label}）：中性，不下注`;
    }
  }

  function formatSigned(num) {
    if (num > 0) return "+" + num;
    if (num < 0) return num.toString();
    return "0";
  }

  function clearInput() {
    document.getElementById("cards").value = "";
  }

  function resetCount() {
    totalCount1 = 0;
    totalCount2 = 0;

    document.getElementById("roundResult1").innerText =
      "本局分數（公式一）：0";
    document.getElementById("totalResult1").innerText =
      "累計分數（公式一）：0";
    document.getElementById("suggestion1").innerText =
      "建議（公式一）：－";

    document.getElementById("roundResult2").innerText =
      "本局分數（公式二）：0";
    document.getElementById("totalResult2").innerText =
      "累計分數（公式二）：0";
    document.getElementById("suggestion2").innerText =
      "建議（公式二）：－";

    document.getElementById("cards").value = "";
  }
</script>

</body>
</html>
